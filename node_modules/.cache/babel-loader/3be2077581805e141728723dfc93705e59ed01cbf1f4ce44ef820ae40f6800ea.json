{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/GaneshSurna/Desktop/PRACTICE/routes-and-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/GaneshSurna/Desktop/PRACTICE/routes-and-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _jsxFileName = \"C:\\\\Users\\\\GaneshSurna\\\\Desktop\\\\PRACTICE\\\\routes-and-authentication\\\\src\\\\components\\\\Events\\\\EventForm.js\",\n  _s = $RefreshSig$(),\n  _action;\nimport { Form, useNavigate, useNavigation } from 'react-router-dom';\nimport { json, redirect } from \"react-router-dom\";\nimport classes from './EventForm.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction EventForm(_ref) {\n  _s();\n  var method = _ref.method,\n    event = _ref.event;\n  var navigate = useNavigate();\n  var _useNavigation = useNavigation(),\n    state = _useNavigation.state;\n  function cancelHandler() {\n    navigate('..');\n  }\n  return /*#__PURE__*/_jsxDEV(Form, {\n    method: method,\n    className: classes.form,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"title\",\n        children: \"Title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"title\",\n        type: \"text\",\n        name: \"title\",\n        defaultValue: event === null || event === void 0 ? void 0 : event.title,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"image\",\n        children: \"Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"image\",\n        type: \"url\",\n        name: \"image\",\n        defaultValue: event === null || event === void 0 ? void 0 : event.image,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"date\",\n        children: \"Date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"date\",\n        type: \"date\",\n        name: \"date\",\n        defaultValue: event === null || event === void 0 ? void 0 : event.date,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        children: \"Description\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"description\",\n        name: \"description\",\n        rows: \"5\",\n        defaultValue: event === null || event === void 0 ? void 0 : event.description,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.actions,\n      children: [state !== \"submitting\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: cancelHandler,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true), state === \"submitting\" && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"submitting...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 34\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 5\n  }, this);\n}\n_s(EventForm, \"kycUvOhuuB2/SVZR21NQ8zLhq9E=\", false, function () {\n  return [useNavigate, useNavigation];\n});\n_c = EventForm;\nexport default EventForm;\nexport function action(_x) {\n  return (_action = _action || _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref2) {\n    var request, params, formData, method, enterdEvent, url, id, response;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          request = _ref2.request, params = _ref2.params;\n          _context.next = 3;\n          return request.formData();\n        case 3:\n          formData = _context.sent;\n          method = request.method;\n          enterdEvent = {\n            title: formData.get(\"title\"),\n            description: formData.get(\"description\"),\n            image: formData.get(\"image\"),\n            date: formData.get(\"date\")\n          };\n          url = \"http://localhost:8080/events\";\n          if (method === \"PATCH\") {\n            id = params.id;\n            url += \"/\" + id;\n            console.log(url);\n          }\n          _context.next = 10;\n          return fetch(url, {\n            method: method,\n            body: JSON.stringify(enterdEvent),\n            headers: {\n              \"Content-Type\": \"application/json\"\n            }\n          });\n        case 10:\n          response = _context.sent;\n          if (response.ok) {\n            _context.next = 13;\n            break;\n          }\n          throw json({\n            message: \"failed to send \".concat(method, \" request.\")\n          }, {\n            status: 500\n          });\n        case 13:\n          return _context.abrupt(\"return\", redirect(\"/events\"));\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }))).apply(this, arguments);\n}\nvar _c;\n$RefreshReg$(_c, \"EventForm\");","map":{"version":3,"names":["Form","useNavigate","useNavigation","json","redirect","classes","jsxDEV","_jsxDEV","Fragment","_Fragment","EventForm","_ref","_s","method","event","navigate","_useNavigation","state","cancelHandler","className","form","children","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","id","type","name","defaultValue","title","required","image","date","rows","description","actions","onClick","_c","action","_x","_action","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref2","request","params","formData","enterdEvent","url","response","wrap","_callee$","_context","prev","next","sent","get","console","log","fetch","body","JSON","stringify","headers","ok","message","concat","status","abrupt","stop","apply","arguments","$RefreshReg$"],"sources":["C:/Users/GaneshSurna/Desktop/PRACTICE/routes-and-authentication/src/components/Events/EventForm.js"],"sourcesContent":["import { Form, useNavigate, useNavigation } from 'react-router-dom';\r\nimport { json, redirect } from \"react-router-dom\";\r\n\r\nimport classes from './EventForm.module.css';\r\n\r\nfunction EventForm({ method, event }) {\r\n  const navigate = useNavigate();\r\n  const {state} = useNavigation();\r\n\r\n  function cancelHandler() {\r\n    navigate('..');\r\n  }\r\n\r\n  return (\r\n    <Form method={method} className={classes.form}>\r\n      <p>\r\n        <label htmlFor=\"title\">Title</label>\r\n        <input id=\"title\" type=\"text\" name=\"title\" defaultValue={event?.title} required />\r\n      </p>\r\n      <p>\r\n        <label htmlFor=\"image\">Image</label>\r\n        <input id=\"image\" type=\"url\" name=\"image\" defaultValue={event?.image} required />\r\n      </p>\r\n      <p>\r\n        <label htmlFor=\"date\">Date</label>\r\n        <input id=\"date\" type=\"date\" name=\"date\" defaultValue={event?.date}  required />\r\n      </p>\r\n      <p>\r\n        <label htmlFor=\"description\">Description</label>\r\n        <textarea id=\"description\" name=\"description\" rows=\"5\" defaultValue={event?.description}  required />\r\n      </p>\r\n      <div className={classes.actions}>\r\n        {state!==\"submitting\" && <>\r\n        <button type=\"button\" onClick={cancelHandler}>\r\n          Cancel\r\n        </button>\r\n        <button>Save</button>\r\n        </>}\r\n        {state===\"submitting\" && <p>submitting...</p>}\r\n      </div>\r\n    </Form>\r\n  );\r\n}\r\n\r\nexport default EventForm;\r\n\r\n\r\nexport async function action({request, params}){\r\n    const formData= await request.formData();\r\n\r\n    const method=request.method;\r\n\r\n    const enterdEvent={\r\n        title:formData.get(\"title\"),\r\n        description:formData.get(\"description\"),\r\n        image:formData.get(\"image\"),\r\n        date:formData.get(\"date\"),\r\n    };\r\n\r\n    let url=\"http://localhost:8080/events\";\r\n\r\n    if(method===\"PATCH\"){\r\n        const id=params.id;\r\n        url+=\"/\"+id;\r\n        console.log(url);\r\n    }\r\n\r\n    const response = await fetch(url,{\r\n        method:method,\r\n        body:JSON.stringify(enterdEvent),\r\n        headers:{\r\n            \"Content-Type\":\"application/json\",\r\n        }\r\n    });\r\n\r\n    if(!response.ok){\r\n        throw json({message:`failed to send ${method} request.`},{status:500});\r\n    }\r\n\r\n    return redirect(\"/events\");\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}